/* ===========================================================
   chat.css — Full file (updated: sidebar sticky on desktop)
   Palette & features same as previous professional light theme
   =========================================================== */

/* Root variables */
:root{
  --page-bg: #F6F8FB;
  --surface: #FFFFFF;
  --text: #0B1220;
  --muted: #556074;
  --border: #E6EEF6;
  --accent: #4F46E5;
  --accent-2: #06B6D4;
  --success: #10B981;
  --shadow-1: 0 6px 18px rgba(11,18,32,0.06);
  --radius: 10px;
  --gap: 12px;
}

/* Global */
html, body {
  height: auto;
  min-height: 100%;
  margin: 0;
  padding: 0;
  background: var(--page-bg);
  color: var(--text);
  font-family: 'Vazirmatn', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  direction: rtl;
  text-align: right;
  line-height: 1.45;
  word-break: break-word;
  -webkit-tap-highlight-color: transparent;
}

/* Page container */
.chatgpt-container {
  width: 100%;
  box-sizing: border-box;
  display: flex;
  justify-content: center;
  padding: 28px;
}

/* Layout wrapper */
.chatgpt-layout {
  width: 100%;
  max-width: 1200px;
  display: flex;
  gap: 20px;
  align-items: stretch;
  box-sizing: border-box;
}

/* ---------------------------
   SIDEBAR (Right on Desktop) - STICKY FIX APPLIED
   --------------------------- */
.sidebar {
  width: 300px;
  min-width: 260px;
  max-width: 340px;
  background: var(--surface);
  border-left: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: var(--shadow-1);
  display: flex;
  flex-direction: column;
  /* === Sticky on desktop ===
     position: sticky allows the sidebar to remain visible while the page scrolls.
     top is matched to the container padding so it sits nicely under the header area.
     height uses calc to ensure it fits the viewport and inner area can scroll independently. */
  position: sticky;
  top: 28px; /* matches .chatgpt-container padding */
  height: calc(100vh - 56px); /* viewport minus top+bottom spacing */
  overflow: auto; /* allow internal scroll for long session list/content */
  order: 2; /* place on the right */
}

/* Sidebar header */
.sidebar-header {
  padding: 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(180deg, rgba(79,70,229,0.03), transparent);
}
.sidebar-header h5 {
  margin: 0;
  font-size: 15px;
  font-weight: 600;
  color: var(--text);
}
.sidebar-controls {
  display:flex;
  gap:8px;
  align-items:center;
}

/* Small control buttons */
.sidebar-controls .btn {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--muted);
  padding: 6px 8px;
  border-radius: 8px;
  cursor: pointer;
  transition: all .14s ease;
}
.sidebar-controls .btn:hover {
  background: var(--accent);
  color: #fff;
  border-color: var(--accent);
}

/* Sessions list - placed inside sidebar, can scroll independently if long */
.sessions-container {
  padding: 12px;
  overflow: auto;
  /* removed max-height here because sidebar has its own height; keep content scrollable */
}

.sessions-list {
  display: flex;
  flex-direction: column;
  gap: var(--gap);
  padding-bottom: 8px;
}

.session-item {
  display: flex;
  gap: 10px;
  align-items: center;
  padding: 12px;
  background: #FBFDFF;
  border: 1px solid transparent;
  border-radius: 10px;
  transition: transform .12s ease, background .12s ease, border-color .12s;
  cursor: pointer;
}
.session-item:hover {
  transform: translateY(-2px);
  background: linear-gradient(90deg, #FBFDFF, #F6F9FF);
  border-color: var(--border);
}
.session-item.active {
  background: linear-gradient(90deg, rgba(79,70,229,0.12), #F6F8FF);
  border-color: rgba(79,70,229,0.18);
  box-shadow: 0 8px 20px rgba(79,70,229,0.06);
}
.session-item strong { font-size: 14px; color: var(--text); }
.session-item .small { font-size: 12px; color: var(--muted); }

/* Mobile nav area inside sidebar */
.mobile-nav-menu {
  display: none;
  padding: 12px;
  border-top: 1px solid var(--border);
}

/* ---------------------------
   MAIN CONTENT (left area)
   --------------------------- */
.main-content {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  gap: 0;
  min-width: 0;
  order: 1;
  background: transparent;
}

/* Chat header */
.chat-header {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 14px 18px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 14px;
  box-shadow: var(--shadow-1);
}
#current-session-title { font-size: 16px; font-weight:600; color:var(--text); margin:0; display:flex; align-items:center; gap:10px; }
.chat-header-actions { display:flex; gap:8px; align-items:center; }

/* Chat messages wrapper */
.chat-messages-container {
  width: 100%;
  box-sizing: border-box;
  margin-bottom: 12px;
}

/* Chat messages card (visual surface) */
.chat-messages {
  padding: 22px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: var(--shadow-1);
  /* DO NOT set overflow:auto; let the page scroll */
}

/* Message bubbles */
.message-user,
.message-assistant,
.typing-indicator {
  display: block;
  clear: both;
  word-wrap: break-word;
}

/* user bubble (you) */
.message-user {
  background: linear-gradient(180deg, #E6FFFA, #DCFDF6);
  border: 1px solid rgba(6,182,212,0.18);
  color: #064E3B;
  padding: 14px 16px;
  border-radius: 12px;
  max-width: 82%;
  margin-left: auto;
  box-shadow: 0 6px 18px rgba(6,182,212,0.06);
  margin-bottom: 14px;
  font-size: 15px;
}

/* assistant bubble */
.message-assistant {
  background: var(--surface);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 14px 16px;
  border-radius: 12px;
  max-width: 82%;
  margin-right: auto;
  box-shadow: 0 6px 18px rgba(11,18,32,0.04);
  margin-bottom: 14px;
  font-size: 15px;
}

/* Message meta header (author, time) */
.message-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  margin-bottom: 8px;
  font-weight:600;
  color: var(--muted);
  font-size: 13px;
}

/* message body */
.message-content { font-size: 15px; color: var(--text); line-height:1.6; margin-bottom:8px; }

/* message actions (copy/share) */
.message-actions {
  display:flex;
  gap:8px;
  margin-top:6px;
}
.message-actions .btn {
  background: #FFFFFF;
  border: 1px solid var(--border);
  color: var(--muted);
  padding: 6px 8px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 13px;
}
.message-actions .btn:hover {
  background: var(--accent);
  color: #fff;
  border-color: var(--accent);
}

/* Model information styling */
.model-info {
    font-size: 12px;
    color: #6B7280; /* Stone Gray */
    margin-top: 8px;
    padding-top: 8px;
    border-top: 1px dashed #E6EEF6;
    font-style: italic;
}

/* Markdown / code blocks inside assistant messages */
.message-assistant .message-content pre {
  background: #F3F7FB;
  padding: 12px;
  border-radius: 8px;
  overflow-x: auto;
  border: 1px solid #EAF2FA;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
  font-size: 13px;
  line-height: 1.5;
  direction: ltr;
  text-align: left;
  position: relative; /* Needed for copy button positioning */
}
.message-assistant .message-content code {
  background: #F3F7FB;
  padding: 2px 6px;
  border-radius: 6px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
  font-size: 13px;
}

/* blockquote */
.message-assistant .message-content blockquote {
  border-right: 3px solid var(--border);
  padding-right: 12px;
  color: var(--muted);
  margin: 12px 0;
  font-style: italic;
  position: relative; /* Needed for copy button positioning */
  padding-top: 30px; /* Space for copy button */
}

/* Copy button for code blocks and quotes */
.copy-code-btn, .copy-quote-btn {
  position: absolute;
  top: 5px;
  left: 5px;
  z-index: 10;
  background: #FFFFFF;
  border: 1px solid var(--border);
  color: var(--muted);
  padding: 4px 6px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 12px;
  transition: all .12s ease;
}

.copy-code-btn:hover, .copy-quote-btn:hover {
  background: var(--accent);
  color: #fff;
  border-color: var(--accent);
}

/* lists, headings and links */
.message-assistant .message-content h1,
.message-assistant .message-content h2,
.message-assistant .message-content h3 {
  margin: 12px 0 6px;
  color: var(--text);
}
.message-assistant .message-content ul,
.message-assistant .message-content ol {
  margin: 12px 0;
  padding-inline-start: 20px;
}
.message-assistant .message-content a {
  color: var(--accent);
  text-decoration: underline;
}

/* typing indicator */
.typing-indicator {
  padding: 12px 14px;
  border-radius: 12px;
  background: linear-gradient(180deg,#FBFDFF,#F6F9FF);
  border: 1px solid var(--border);
  max-width: 40%;
  margin-bottom: 16px;
}

/* ---------------------------
   Input area — sticky to bottom
   --------------------------- */
.input-container {
  position: sticky;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 40;
  padding: 14px;
  background: linear-gradient(180deg, rgba(246,248,251,0.6), rgba(255,255,255,0.9));
  backdrop-filter: blur(6px);
  border-top: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 -8px 24px rgba(11,18,32,0.04);
  width: 100%;
  box-sizing: border-box;
  margin-top: 14px;
}

/* inner input group */
.input-group {
  display:flex;
  align-items:center;
  gap:10px;
  border-radius: 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 8px;
  box-shadow: 0 6px 16px rgba(11,18,32,0.03);
}

#message-input {
  flex:1;
  min-height: 44px;
  max-height: 220px;
  resize: none;
  border: none;
  outline: none;
  font-size: 15px;
  padding: 8px 10px;
  color: var(--text);
  background: transparent;
}

/* send button */
.send-button {
  background: linear-gradient(180deg, var(--accent), #3B3AE6);
  color: #fff;
  border: none;
  padding: 10px 14px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
  box-shadow: 0 8px 24px rgba(79,70,229,0.18);
}
.send-button:disabled {
  opacity: 0.55;
  cursor: not-allowed;
  background: var(--border);
  color: var(--muted);
}

/* web search / small action buttons */
.web-search-container .btn,
.chat-header-actions .btn,
.sidebar .btn {
  transition: all .12s ease;
  border-radius: 8px;
}

/* small helper text */
.input-hint {
  margin-top: 8px;
  text-align: center;
  font-size: 13px;
  color: var(--muted);
}

/* modal styles */
.modal-content {
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--surface);
  box-shadow: 0 20px 60px rgba(11,18,32,0.12);
}
.modal-header {
  border-bottom: 1px solid var(--border);
  padding: 12px 16px;
}
.chatbot-selection-card, .model-selection-card {
  background: #FBFDFF;
  border-radius: 10px;
  padding: 12px;
  border: 1px solid var(--border);
}

/* small utilities */
.text-muted { color: var(--muted); }
.rounded-sm { border-radius:8px; }
.small { font-size: 13px; color: var(--muted); }

/* ---------------------------
   RESPONSIVE (mobile-first)
   --------------------------- */
@media (max-width: 1024px) {
  .chatgpt-layout { gap: 12px; padding: 0; }
  .sidebar { width: 280px; min-width: 240px; }
  .chat-messages { padding: 18px; }
}

@media (max-width: 768px) {
  /* mobile: sidebar becomes overlay sliding from right */
  .chatgpt-layout { flex-direction: column-reverse; gap: 10px; max-width:100%; padding:12px; }
  .sidebar {
    /* override sticky on mobile: use fixed overlay */
    position: fixed;
    top: 0;
    right: 0;
    height: 100vh;
    transform: translateX(110%);
    transition: transform .28s cubic-bezier(.2,.9,.2,1);
    z-index: 200;
    box-shadow: 0 24px 72px rgba(11,18,32,0.18);
    border-left: 1px solid var(--border);
    border-radius: 0;
    max-width: 92%;
  }
  .sidebar.show { transform: translateX(0); }
  .overlay {
    display: none;
  }
  .overlay.show {
    display:block;
    position: fixed;
    inset: 0;
    background: rgba(8,12,20,0.45);
    z-index: 150;
  }
  .mobile-nav-menu { display:block; }
  .chat-header { margin-bottom: 8px; }
  .chat-messages { padding: 14px; border-radius: 10px; }
  .message-user, .message-assistant { max-width: 94%; }
  .input-container { padding: 10px; }
  .hamburger-menu { display:block; position:fixed; top:14px; right:14px; z-index:300; background:var(--surface); border:1px solid var(--border); border-radius:10px; padding:8px; box-shadow:0 8px 30px rgba(11,18,32,0.08); }
}

/* extra small */
@media (max-width: 420px) {
  .sidebar { max-width: 100%; }
  .chatgpt-container { padding: 12px; }
  .session-item { padding: 10px; }
  .send-button { padding: 8px 12px; font-size:14px; }
}

/* Accessibility & focus */
:focus { outline: 3px solid rgba(79,70,229,0.12); outline-offset: 2px; border-radius: 8px; }

/* END OF FILE */
.mobile-nav-menu.d-md-none {
  display: block; /* ensure visible on mobile */
  padding: 10px 6px;     /* slightly reduced outer padding for compactness */
  border-top: 1px solid var(--border);
  background: transparent;
}

/* each nav item spacing (slightly smaller gaps between items) */
.mobile-nav-menu.d-md-none .nav-item {
  margin-bottom: 6px;    /* reduced margin between items */
}

/* style links: larger text, comfortable touch padding, RTL icon spacing */
.mobile-nav-menu.d-md-none .nav-link {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 10px;    /* comfortable touch area */
  min-height: 44px;      /* recommended touch target */
  font-size: 15px;       /* larger & readable */
  color: var(--text);
  background: #FFFFFF;   /* surface for clear contrast (you can change) */
  border: 1px solid var(--border);
  border-radius: 10px;
  text-decoration: none;
  transition: background .12s ease, transform .08s ease;
}

/* icon in RTL: keep icon to left side, label on right */
.mobile-nav-menu.d-md-none .nav-link i {
  margin-left: 8px;   /* icon separation from text in RTL */
  margin-right: 0;
  width: 20px;
  text-align: center;
  color: var(--muted);
}

/* hover / active feedback for links */
.mobile-nav-menu.d-md-none .nav-link:hover {
  background: linear-gradient(90deg, #FBFDFF, #F6F9FF);
  transform: translateY(-1px);
  border-color: rgba(79,70,229,0.12);
}
.mobile-nav-menu.d-md-none .nav-link:active {
  transform: translateY(0);
}

/* smaller badge / text inside nav-item adjustments */
.mobile-nav-menu.d-md-none .nav-link .badge {
  margin-left: 6px;
  margin-right: 0;
  font-size: 12px;
}
@media (max-width: 768px) {
  /* make base paddings slightly larger for readability on small screens */
  .chatgpt-container { padding: 14px; }
  .chat-header { padding: 12px; }
  .chat-messages { padding: 16px; }
  .input-container { padding: 10px; }

  /* ensure session items in sidebar are not cramped */
  .session-item { padding: 10px; margin-bottom: 8px; }

  /* make nav links a bit more prominent on narrow screens */
  .mobile-nav-menu.d-md-none .nav-link {
    font-size: 16px;
    padding: 14px 12px;
    min-height: 48px;
  }
}