# نحوه اجرای تست‌های API

## بررسی اجمالی

این سند نحوه اجرای تست‌های API برای پروژه MobixAI را توضیح می‌دهد. تست‌ها برای بررسی عملکرد صحیح نقاط پایانی API طراحی شده‌اند.

## پیش‌نیازها

1. اطمینان حاصل کنید که Django REST Framework نصب شده است:
   ```bash
   pip install djangorestframework
   ```

2. اطمینان حاصل کنید که تمامی تغییرات پیکربندی اعمال شده‌اند:
   - `rest_framework` و `api` در `INSTALLED_APPS` موجود هستند
   - پیکربندی DRF در `settings.py` اضافه شده است
   - `djangorestframework>=3.14.0` در `requirements.txt` موجود است

## فایل‌های تست

سه فایل اصلی برای تست API وجود دارد:

1. `test_all_apis.py` - اسکریپت تست جامع Python
2. `run_api_tests.bat` - اسکریپت اجرایی برای Windows
3. `run_api_tests.sh` - اسکریپت اجرایی برای Linux/Mac

## اجرای تست‌ها

### روش 1: اجرای مستقیم اسکریپت Python

```bash
python test_all_apis.py
```

### روش 2: استفاده از اسکریپت اجرایی Windows

```cmd
run_api_tests.bat
```

### روش 3: استفاده از اسکریپت اجرایی Linux/Mac

```bash
chmod +x run_api_tests.sh
./run_api_tests.sh
```

## خروجی تست

اسکریپت تست سه بخش اصلی را بررسی می‌کند:

1. **وارد کردن کامپوننت‌ها**: بررسی اینکه تمامی کامپوننت‌های مورد نیاز قابل وارد کردن هستند
2. **دسترسی به نقاط پایانی**: بررسی اینکه نقاط پایانی API قابل دسترسی هستند
3. **عملکرد با احراز هویت**: بررسی عملکرد API با کاربران احراز هویت شده

## نتایج

پس از اجرای تست‌ها، یک خلاصه از نتایج نمایش داده می‌شود:

- **PASS**: تست با موفقیت انجام شد
- **FAIL**: تست با شکست مواجه شد

## عیب‌یابی

اگر تست‌ها با شکست مواجه شدند:

1. بررسی کنید که سرور Django در حال اجرا است
2. بررسی کنید که تمامی مایگریشن‌ها اعمال شده‌اند
3. بررسی کنید که پیکربندی DRF به درستی اعمال شده است
4. بررسی کنید که وابستگی‌ها نصب شده‌اند

## توسعه بیشتر

برای افزودن تست‌های بیشتر:

1. فایل `test_all_apis.py` را ویرایش کنید
2. متد `test_api_with_authentication` را گسترش دهید
3. نقاط پایانی بیشتری را به لیست `authenticated_endpoints` اضافه کنید

## نکات مهم

- تست‌ها داده‌های آزمایشی ایجاد می‌کنند و سپس آنها را پاک می‌کنند
- تست‌ها تغییری در داده‌های واقعی پایگاه داده ایجاد نمی‌کنند
- تست‌ها می‌توانند چندین بار بدون مشکل اجرا شوند